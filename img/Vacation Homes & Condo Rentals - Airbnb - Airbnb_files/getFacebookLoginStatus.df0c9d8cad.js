__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getFacebookBootstrapData",{enumerable:!0,get:function(){return l.getFacebookBootstrapData}}),e.getLoginStatus=function(){return w().then(o=>new Promise(t=>o.getLoginStatus(t)))},e.init=w,e.isFacebookLoaded=p,e.login=function(o){return w().then(t=>new Promise(n=>t.login(n,o)))},e.logout=function(){return w().then(o=>new Promise(t=>o.logout(t)))},e.parseXFBML=function(o){return w().then(t=>(t.XFBML&&t.XFBML.parse(o),Promise.resolve()))},e.ui=function(o){return w().then(t=>new Promise(n=>t.ui(o,n)))};var o=babelHelpers.interopRequireDefault(r(d[0])),t=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),u=babelHelpers.interopRequireDefault(r(d[3])),s=babelHelpers.interopRequireDefault(r(d[4])),c=r(d[5]),l=r(d[6]),f=babelHelpers.interopRequireDefault(r(d[7]));const b=[];function p(){var o;return!(null===(o=window)||void 0===o||!o.FB)}function k(){const t=o.default.get('facebook-init');document.querySelector(`script[src="${t.sdkUrl}"]`)||(window.fbAsyncInit=()=>(function(o){for(window.FB.init({appId:o,status:!0,cookie:!0,oauth:!0,version:'v6.0'});b.length>0;)b[0](window.FB),b.shift()})(t.appId),window.Airbnb&&(window.Airbnb.FACEBOOK_PERMS=t.scope),(0,n.default)(t.sdkUrl));const s=new Promise(o=>b.push(o));return(0,u.default)(s,1e4).catch(()=>{throw(0,c.airdogCount)('facebook_sdk_init_timeout'),new Error('FB SDK init timeout')})}function w(){const n=o.default.get('facebook-init');if(null==n||!n.enabled)return Promise.reject(new Error("Facebook SDK isn't supported on this page"));if(p())return Promise.resolve(window.FB);const u=t.default.tld_country();return f.default.getBootstrap('facebook_sdk_default_off_country_toggle')?new Promise((o,t)=>{(0,s.default)({toolName:'facebook.com',doesCookieHaveConsentCb:n=>{n?((0,c.airdogCount)('facebook_sdk.cookie_check',1,["country:"+u,'sdk_disabled:false']),k().then(t=>o(t))):((0,c.airdogCount)('facebook_sdk.cookie_check',1,["country:"+u,'sdk_disabled:true']),t(new Error("Facebook SDK isn't supported on this page because you have opted out of Facebook third party cookies.")))}})}):((0,c.airdogCount)('facebook_sdk.no_cookie_check',1,["country:"+u]),k())}}),"1bc98d",["05b07c","cf3c1c","8abbba","4ea5d7","7d1fdb","08b665","8b20a4","6b945b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,o){const n=new Promise((t,n)=>{setTimeout(()=>n(new Error(`Timeout after ${o}ms`)),o)});return Promise.race([t,n])}}),"4ea5d7",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Promise((n,c)=>{const o=document.createElement('script');o.type='text/javascript',o.async=!0,o.onload=n,o.onerror=c,o.src=t,(document.head||document.getElementsByTagName('head')[0]).appendChild(o)})}}),"8abbba",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FACEBOOK_ACTION_TYPE=void 0,Object.defineProperty(e,"autologinEnabled",{enumerable:!0,get:function(){return b.autologinEnabled}}),e.default=function(){const p=(0,c.getFacebookBootstrapData)();if(!p)return;(0,u.airdogCount)('facebook.js.get_login_status.started'),(0,c.getLoginStatus)().then(O=>{if((0,f.getFacebookPromptShowCount)()>=f.MAX_FACEBOOK_PROMPT_SHOW)(0,c.logout)().then(()=>{(0,o.default)("fblo_"+p.appId,null,{domain:void 0,path:'/'})}).catch(o=>{const t=new Error(o.message);(0,_.reportError)(t,{originalError:o})}),(0,o.default)('fb_logout',null,{domain:(0,l.getCookieHost)(),path:'/'}),(0,f.disableFacebookAutologin)(),(0,u.airdogCount)('facebook.js.get_login_status.logout');else{if((0,u.airdogCount)('facebook.js.get_login_status.response',1,["status:"+O.status,"is_logged_in:"+s.default.isLoggedIn(),"auto_login:"+(0,b.autologinEnabled)()]),/fb_action_ids=/.test(document.location.search)&&t.default.post('/users/detect_fb_session'),s.default.isLoggedIn())return;'connected'!==O.status||(0,f.hasDismissedFacebookPrompt)()||t.default.post('/users/facebook_auto_login',{check_linked_airbnb_account:!0}).then(o=>{o.has_linked_airbnb_account?(n.default.emit('initializeFacebookPrompt'),(0,f.setFacebookPromptShowCount)()):((0,f.setHideFacebookPrompt)(),(0,f.disableFacebookAutologin)())})}}).catch(o=>{const t=new Error(o.message);(0,_.reportError)(t,{originalError:o})})},Object.defineProperty(e,"hasDismissedFacebookPrompt",{enumerable:!0,get:function(){return f.hasDismissedFacebookPrompt}});var o=babelHelpers.interopRequireDefault(r(d[0])),t=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),s=babelHelpers.interopRequireDefault(r(d[3])),u=r(d[4]),l=r(d[5]),c=r(d[6]),_=r(d[7]),b=r(d[8]),f=r(d[9]);e.FACEBOOK_ACTION_TYPE={NO_AUTOLOGIN_AND_PROMPT:0,SHOW_FACEBOOK_PROMPT:1,FACEBOOK_AUTO_LOGIN:2}}),"ade67b",["b0b12d","638d04","762bdc","c1939d","08b665","b686a9","1bc98d","5511db","0ef93e","37dbc2"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/signup-login-dls-shared/utils/getFacebookLoginStatus.9a9ecc8fb4.js.map